<DOCTYPE HTML>
    <html lang="pt-BR">
      <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> Projeto </title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
        <style>
          body{
            background-color:beige;
            padding-top: 100px;
          }
          :root{
            --primary: #F9AFA6;
          }
          .bg-primary, .btn-primary{
            background-color: var(--primary) !important;
            border-color: #F9AFA6;
          }
          .pequeno{
            width: 13%;
          }
        </style>
      </head>
    
      <body>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
          
        <!-- O LINK PARA A ÚLTIMA PÁGINA ESTÁ NO BOTÃO COMPRAR -->
        <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top bg-primary">
          <div class="container-fluid">
            <div class="container">
              <a class="navbar-brand" href="index.html">
                <img src="img/logo.PNG" alt="logo" width="150" height="50">
              </a>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"> </span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="#"> Ofertas </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#"> Stories </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#"> Sobre </a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Categorias
                  </a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="index1.html"> Materiais escolares </a></li>
                    <li><a class="dropdown-item" href="#"> Materiais de escritorio </a></li>
                  </ul>
                </li>
                <li>
                  <div class="ml-1 mr-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search-heart" viewBox="0 0 16 16" style="margin-left: 4; margin-right: 4;">
                      <path d="M6.5 4.482c1.664-1.673 5.825 1.254 0 5.018-5.825-3.764-1.664-6.69 0-5.018"/>
                      <path d="M13 6.5a6.471 6.471 0 0 1-1.258 3.844c.04.03.078.062.115.098l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1.007 1.007 0 0 1-.1-.115h.002A6.5 6.5 0 1 1 13 6.5M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11"/>
                    </svg>
                  </div>                
                </li>
                <li class="search">
                  <input type="search" name="caixa-buscar" id="busca" placeholder="O que você procura?">
                </li>
                <li>
                  <div class="ml-4 mr-2">
                    <a href="index3.html"> <i class="bi bi-bag-heart" style="width: 16px; height: 16px; margin-left: 4; margin-right: 4;"></i> </a>
                  </div>
                </li>
                <li class="nav-item active">
                  <a class="nav-link" href="#"> Login <span class="sr-only"> </span></a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
    
        <div class="container">
          <div class="row">
            <div class="col-md-6">
              <h3 class="text-lg-left"> Carrinho </h3>
              <div class="card">
                <table class="table table-hover shopping-cart-wrap">
                  <thead class="text-muted">
                    <tr>
                      <th scope="col"> Produto </th>
                      <th scope="col" width="120"> Quantidade </th>
                      <th scope="col" width="120"> Preço </th>
                      <th scope="col" width="200" class="text-right"> Ação </th>
                    </tr>
                  </thead>
                  <tbody id="produtos">
                    
                  </tbody>
                </table>
            </div>
          </div>
          

            <div class="col-md-6">
              <div class="row">
                <h4> Resumo da compra </h4>
              </div>
              <div class="row">
                <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="Codigo do cupom">
                <p class="text-dark mt-3"> Subtotal </p>
                <p class="text-end"> 2 x R$13,00 </p>
                <p class="text-end"> 3 x R$6,00 </p>
                <p class="text-dark"> Total </p>
                <p class="text-end"> R$ 44,00 </p>
                <a href="index4.html"> <button type="button" class="btn btn-primary"> Comprar </button> </a>
              </div>
            </div>
          </div>
          
        <footer class="border-top text-muted bg-light">
          <div class="container">
            <div class="row py-3">
              <div class="col text-center text-md-left">
                &copy; 2023 - Paper Encanto
              </div>
              <div class="col text-center text-md-left">
                <a href="#" class="text-decoration-none text-dark"> Comprar </a> </br>
                <a href="index1.html" class="text-decoration-none text-black-50"> Materiais escolares </a> </br>
                <a href="#" class="text-decoration-none text-black-50"> Materiais de escritorio </a> </br>
              </div>
              <div class="col text-center text-md-left">
                <a href="#" class="text-decoration-none text-dark"> Ajuda </a> </br>
                <a href="#" class="text-decoration-none text-black-50"> Centro de Ajuda </a> </br>
                <a href="#" class="text-decoration-none text-black-50"> Status do pedido </a> </br>
                <a href="#" class="text-decoration-none text-black-50"> Devoluções e garantias </a> </br>
                <a href="#" class="text-decoration-none text-black-50"> Contate-nos </a> </br>
              </div>
              <div class="col text-center text-md-left">
                <a href="#" class="text-decoration-none text-dark"> Sobre </a> </br>
                <a href="#" class="text-decoration-none text-black-50"> Sobre nós </a> </br>
                <a href="#" class="text-decoration-none text-black-50"> Responsabilidade </a> </br>
                <a href="#" class="text-decoration-none text-black-50"> Tecnologia e Renovação </a> </br>
                <a href="#" class="text-decoration-none text-black-50"> Conheça nossa história </a> </br>
              </div>
            </div>
          </div>
        </footer>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

        <script>
          const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
          let params = new URLSearchParams(document.location.search);
      
      
          if (!carrinho.find(item => item[0].id == params.get('id')) && params.get('id') != null) {
            carrinho.push({ id: params.get('id'), quantidade: 1 });
            localStorage.setItem('carrinho', JSON.stringify(carrinho));
          }
      
      
          for (let item of carrinho) {
            getData(item.id, item.quantidade)
          }
      
          function getData(id, quantidade) {
            document.getElementById('produtos').innerHTML = "";
            fetch(`https://fakestoreapi.com/produtos/?id=${id}`)
              .then(response => response.json())
              .then(data => renderizar(data, quantidade))
          }
      
          function renderizar(produto, quantidade) {
            document.getElementById('produtos').innerHTML += `
            <tr>
                  <td>
                    <figure class="media">
                      <div class="img-wrap"><img src="${produto.imgScr}"
                          class="img-thumbnail img-sm"></div>
                      <figcaption class="media-body">
                        <h6 class="title text-truncate">${produto.title} </h6>
                        
                      </figcaption>
                    </figure>
                  </td>
                  <td>
                    <input type="number"  value="${quantidade}" min="1" max="10" class="form-control" onchange="quantidade(this, ${response.id})">
                  </td>
                  <td>
                    <div class="price-wrap">
                      <var class="price" >R$ ${(produto.price * quantidade).toFixed(2)} </var>
                    </div> 
                  </td>
                  <td class="text-right">
                    <a href="#" class="btn btn-outline-danger" onclick="remover(${produto.id})"> Remove</a>
                  </td>
                </tr>
            `;
          }
          function quantidade(el, id) {
            carrinho.map(item => {
              if (item.id == id) {
                item.quantidade = Number(el.value)
              }
            })
            console.log(carrinho)
            localStorage.setItem('carrinho', JSON.stringify(carrinho));
            for (let item of carrinho) {
              getData(item.id, item.quantidade)
            }
          }
      
          function remover(id) {
            carrinho.splice(carrinho.indexOf(String(id)), 1);
            localStorage.setItem('carrinho', JSON.stringify(carrinho));
            location.href = "carrinho.html";
          }
        </script>
      </body>
    </html>